% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/count_presences.R
\name{count_presences}
\alias{count_presences}
\title{Unified interface for GBIF presence counts}
\usage{
count_presences(
  species,
  shapefile = NULL,
  country = NULL,
  method = c("simple", "auth"),
  year = c(1999L, as.integer(format(Sys.Date(), "\%Y"))),
  ...
)
}
\arguments{
\item{species}{A data frame/data.table/tibble with columns \code{family}, \code{genus}, \code{species}.}

\item{shapefile}{Path to a vector file readable by \code{terra::vect()}.
If provided (and \code{country} is \code{NULL}), its MBR is used as the GBIF
\code{geometry} filter via \code{\link{wkt_rect_ccw}}. Mutually exclusive with \code{country}.}

\item{country}{Two-letter ISO country code (e.g., \code{"DK"}). Ignored if \code{shapefile} is provided.
Mutually exclusive with \code{shapefile}.}

\item{method}{Character; one of \code{"simple"} (default) or \code{"auth"}.
Matching is case-insensitive.}

\item{year}{Integer vector \code{c(start, end)} with the year range (inclusive). Default is
\code{c(1999, current_year)}.}

\item{...}{Additional arguments passed to the selected backend:
\itemize{
\item For \code{method = "simple"}: \code{facet_limit}, \code{verbose}.
\item For \code{method = "auth"}: \code{restrict_to_species}, \code{verbose}.
}}
}
\value{
A \code{data.table} with columns \code{family}, \code{genus}, \code{species}, \code{N}.
}
\description{
Convenience wrapper that dispatches to \code{\link{count_presences_simple}} (fast,
no authentication) or \code{\link{count_presences_auth}} (robust, authenticated GBIF
download). Returns a tidy table of counts per species within either a country or
the MBR of a shapefile.
}
\details{
Count presences via GBIF (choose fast \strong{simple} or robust \strong{auth} method)

Use \code{method = "simple"} for quick exploratory work; switch to \code{"auth"} for
larger lists or when you need a citable, reproducible download record.
}
\examples{
\dontrun{
f_species <- system.file("ex/Species_List.csv", package = "SpeciesPoolR")
shp       <- system.file("ex/Aarhus.shp",      package = "SpeciesPoolR")
sp        <- SpeciesPoolR::get_data(f_species)
clean     <- SpeciesPoolR::Clean_Taxa(sp$Species)

# Fast
out1 <- count_presences(clean, shapefile = shp, method = "simple")

# Robust (requires GBIF_USER/GBIF_PWD/GBIF_EMAIL)
out2 <- count_presences(clean, shapefile = shp, method = "auth", restrict_to_species = TRUE)
}

}
\seealso{
\code{\link{count_presences_simple}}, \code{\link{count_presences_auth}}, \code{\link{wkt_rect_ccw}}

Other GBIF helpers: 
\code{\link{count_presences_auth}()},
\code{\link{count_presences_simple}()}
}
\concept{GBIF helpers}
