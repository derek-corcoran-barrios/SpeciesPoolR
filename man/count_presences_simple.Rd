% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/count_presences.R
\name{count_presences_simple}
\alias{count_presences_simple}
\title{Fast presence counts via GBIF facets (unauthenticated)}
\usage{
count_presences_simple(
  species,
  shapefile = NULL,
  country = NULL,
  year = c(1999L, as.integer(format(Sys.Date(), "\%Y"))),
  facet_limit = 20000L,
  verbose = TRUE
)
}
\arguments{
\item{species}{A data frame/data.table/tibble with columns \code{family}, \code{genus}, \code{species}.
(Use cleaned GBIF-aligned names for best matches.)}

\item{shapefile}{Path to a vector file readable by \code{terra::vect()}.
If provided (and \code{country} is \code{NULL}), its MBR is used as the GBIF
\code{geometry} filter via \code{\link{wkt_rect_ccw}}. Mutually exclusive with \code{country}.}

\item{country}{Two-letter ISO country code (e.g., \code{"DK"}). Ignored if \code{shapefile} is provided.
Mutually exclusive with \code{shapefile}.}

\item{year}{Integer vector \code{c(start, end)} with the year range (inclusive). Default is
\code{c(1999, current_year)}.}

\item{facet_limit}{Integer maximum number of facet entries GBIF will return. Default \code{20000}.}

\item{verbose}{Logical; if \code{TRUE}, prints helpful warnings.}
}
\value{
A \code{data.table} with columns \code{family}, \code{genus}, \code{species}, \code{N}.
}
\description{
Performs a single GBIF search using a facet on \code{scientificName} and returns
occurrence counts for the supplied species list within either a country or the
minimum bounding rectangle (MBR) of a shapefile (converted to CCW WKT with
\code{\link{wkt_rect_ccw}}). This method is \strong{fast and polite} (one request),
but facet results can be truncated if your species list exceeds \code{facet_limit}.
}
\details{
Count presences quickly (no auth) using GBIF facets

This function makes \strong{one} call to \code{rgbif::occ_search()} with \code{facet = "scientificName"}
and joins the returned counts to your requested species. Species not present in the facet response
receive \code{N = 0}. If your list is longer than \code{facet_limit}, GBIF may truncate the facet;
consider \code{\link{count_presences_auth}} for complete, reproducible results.
}
\examples{
\dontrun{
f_species <- system.file("ex/Species_List.csv", package = "SpeciesPoolR")
shp       <- system.file("ex/Aarhus.shp",      package = "SpeciesPoolR")
sp        <- SpeciesPoolR::get_data(f_species)
clean     <- SpeciesPoolR::Clean_Taxa(sp$Species)

out <- count_presences_simple(
  species   = clean,
  shapefile = shp,
  year      = c(1999, as.integer(format(Sys.Date(), "\%Y")))
)
head(out)
}

}
\seealso{
\code{\link{count_presences_auth}}, \code{\link{count_presences}}, \code{\link{wkt_rect_ccw}}

Other GBIF helpers: 
\code{\link{count_presences}()},
\code{\link{count_presences_auth}()}
}
\concept{GBIF helpers}
